# Migration `20210131020140-update_user_model`

This migration has been generated by Juram Park at 1/31/2021, 11:01:40 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE `issue` MODIFY `is_published` INT NOT NULL DEFAULT 0

ALTER TABLE `post` ALTER COLUMN `is_deleted` DROP DEFAULT,
    MODIFY `exposed` INT NOT NULL DEFAULT 0,
    MODIFY `clicked` INT NOT NULL DEFAULT 0

ALTER TABLE `user` DROP COLUMN `token`,
    DROP COLUMN `c_time`

ALTER TABLE `user` RENAME INDEX `email_UNIQUE` TO `user.email_unique`
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210130083149-update_user_model..20210131020140-update_user_model
--- datamodel.dml
+++ datamodel.dml
@@ -3,21 +3,11 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
-model apt_response {
-  id           Int  @default(autoincrement())
-  apt_response Int
-  user_id      Int
-  user         user @relation(fields: [user_id], references: [id])
-
-  @@id([id, apt_response])
-  @@index([user_id], name: "fk_user_response_user1_idx")
-}
-
 model article {
   id        Int      @id @default(autoincrement())
   pub_time  DateTime
   url       String
@@ -53,8 +43,9 @@
   content          String?
   option_list_json String?
   m_time           DateTime        @default(now())
   c_time           DateTime        @default(now())
+  is_published     Int             @default(0)
   article          article[]
   issue_has_tag    issue_has_tag[]
   post             post[]
   response         response[]
@@ -78,10 +69,12 @@
   is_deleted   Int?
   content      String
   author_id    Int
   issue_id     Int
-  is_published Int       @default(0)
-  title        String?
+  url          String?
+  liked        Int       @default(0)
+  exposed      Int       @default(0)
+  clicked      Int       @default(0)
   user         user      @relation(fields: [author_id], references: [id])
   issue        issue     @relation(fields: [issue_id], references: [id])
   comment      comment[]
@@ -113,13 +106,13 @@
   name         String
   email        String         @unique
   birth_year   DateTime?
   sns          String?
-  token        String
   password     String
   role         Int            @default(1)
-  c_time       DateTime
-  apt_response apt_response[]
+  pic_url      String?
+  info         String?
+  bio          String?
   comment      comment[]
   post         post[]
   response     response[]
 }
```


